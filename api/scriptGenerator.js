import { GoogleGenerativeAI } from "@google/generative-ai";
import dotenv from 'dotenv';
dotenv.config();
  
  const apiKey = process.env.GEMINI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-1.5-flash",
  });
  
  const generationConfig = {
    temperature: 1.3,
    topP: 0.95,
    topK: 64,
    maxOutputTokens: 30192,
    responseMimeType: "application/json",
  };
  
 async function generateScript(prompt) {
     console.log(prompt);  

    const parts = [
      {text: "{\n  \"TaskDescription\": \"Your task is to generate a structured narrative script where speakers interact with each other and with the listener. Any person mentioned in the prompt is a listener and must not be included in the script only the speakers in the input speakers will be included in script example if in prompt a name ankit is provided take them as listener in script they dont have any dialogs they only listen to speakers. the script should not be vague and should be such that audio can be generated from these. The script should be broken down into multiple scenes, each containing a background image prompt and a dialogue array that specifies what each character says, how they say it, and how they appear in the scene.\",\n\n  \"FormatGuidelines\": {\n    \"SceneObject\": {\n      \"sceneName\": \"A descriptive name for the scene that highlights its setting or location.\",\n      \"backgroundImagePrompt\": \"Include a prompt to create a background image that depicts the setting of the scene without any characters. For example, if the scene is set in a kitchen, the background should show a kitchen without any people.\",\n      \"script\": [\n        {\n          \"Speech\": \"The line spoken by the character in this scene.\",\n          \"Speaker\": \"The name of the character speaking the line. speaker must only be from the list of speaker provided in input\",\n          \"Tone\": \"The tone of the line (e.g., excited, mysterious, calm).\",\n          \"Look\": \"The direction of the speaker's gaze: can only be 'Listener' or 'Character'.\",\n          \"View\": \"The perspective of the scene: can only be 'Normal' or 'Focused'.\"\n        }\n      ]\n    }\n  },\n\n  \"ViewGuidelines\": {\n    \"Normal\": \"Shows both characters in the scene, suitable for general conversation.\",\n    \"Focused\": \"Zooms in on a single character to emphasize important statements or strong emotions. When using Focused, the Look must always be set to Listener to engage directly with the viewer. Focused should only be used on important , interesting parts in which its better to focus on the speaker so dont use it too frequently\"\n  },\n\n\"Speaker Guidelines: {speakers in the script must only be from the list of speaker provided in input. Dont inculde any speaker other than from the input speakers list even if its mentioned in the prompt. The act as listeners and dont participate in the script}\n\n  \"Input\": {\n    \"Prompt\": \"A single string that describes the narrative topic, giving enough context for the AI to generate scenes and a script with interactions between characters.\",\n    \"Speakers\": [\n      \"Name of Speaker 1\",\n      \"Name of Speaker 2\",\n      \"...additional speakers...\"\n    ],\n    \"Tone\": \"The overall tone of the narrative (e.g., mystery, adventure, comedy, etc.).\"\n  },\n\n  \"ExampleOutputFormat\": {\n    \"imageGenerationGuideline\": \"Provide background image generation guidelines based on the setting, ensuring it only depicts the background without any characters.\",\n    \"scenes\": [\n      {\n        \"sceneName\": \"Example Scene Name\",\n        \"backgroundImagePrompt\": \"A brief description of the background that should not involve speakers and fits the scene.\",\n        \"script\": [\n          {\n            \"Speech\": \"A sample line of dialogue from a character.\",\n            \"Speaker\": \"Character Name\",\n            \"Tone\": \"Tone of the spoken line.\",\n            \"Look\": \"The direction of the speaker's gaze, either 'Listener' or 'Character'.\",\n            \"View\": \"The view perspective for this line, either 'Normal' or 'Focused'.\"\n          },\n          {\n            \"Speech\": \"Another sample line of dialogue.\",\n            \"Speaker\": \"Another Character Name\",\n            \"Tone\": \"Tone of the spoken line.\",\n            \"Look\": \"The direction of the speaker's gaze, either 'Listener' or 'Character'.\",\n            \"View\": \"The view perspective for this line, either 'Normal' or 'Focused'.\"\n          }\n        ]\n      }\n    ]\n  }\n}"},
      {text: "input: {\n\n  \"prompt\": \"A trip to Japan\nwhere two friends explore the bustling streets of Tokyo and the calm temples of\nKyoto.\",\n\n  \"speakers\": [\n\n    \"Kieth\",\n\n    \"Alice\"\n\n  ],\n\n  \"tone\": \"Adventure\"\n\n}"},
      {text: "output: {\n  \"imageGenerationGuideline\": \"Create a visually engaging image that reflects the excitement and cultural immersion of a trip to Japan. Consider showcasing iconic landmarks like Mount Fuji, bustling city streets, serene gardens, and colorful temples.\",\n  \"scenes\": [\n    {\n      \"sceneName\": \"Intro\",\n      \"backgroundImagePrompt\": \"A vibrant image capturing the energy and beauty of Tokyo, featuring neon lights, bustling streets, and the iconic Shibuya crossing.\",\n      \"script\": [\n        {\n          \"Speech\": \"Hey everyone, welcome back! Today we're sharing an experience that's still making us smile weeks later.\",\n          \"Speaker\": \"Kieth\",\n          \"Tone\": \"Adventure\",\n          \"Look\": \"Listener\",\n          \"View\": \"Normal\"\n        },\n        {\n          \"Speech\": \"Yep, we're talking about our amazing trip to Japan! Get ready for a whirlwind of culture, delicious food, and incredible sights.\",\n          \"Speaker\": \"Alice\",\n          \"Tone\": \"Adventure\",\n          \"Look\": \"Listener\",\n          \"View\": \"Focused\"\n        },\n        {\n          \"Speech\": \"It was truly a trip of a lifetime. We were blown away by everything from the ancient temples to the futuristic technology.\",\n          \"Speaker\": \"Kieth\",\n          \"Tone\": \"Adventure\",\n          \"Look\": \"Listener\",\n          \"View\": \"Normal\"\n        },\n        {\n          \"Speech\": \"And let's not forget the ramen! We tried so many different kinds. It was seriously a food coma dream.\",\n          \"Speaker\": \"Alice\",\n          \"Tone\": \"Adventure\",\n          \"Look\": \"Listener\",\n          \"View\": \"Normal\"\n        }\n      ]\n    },\n    {\n      \"sceneName\": \"Tokyo Adventure\",\n      \"backgroundImagePrompt\": \"An image depicting a bustling street scene in Tokyo with vibrant neon signs, traditional shops, and people wearing colorful clothing.\",\n      \"script\": [\n        {\n          \"Speech\": \"So, we landed in Tokyo, the heart of Japan, and were instantly mesmerized by the energy. It's like a constant, exciting symphony of sights and sounds.\",\n          \"Speaker\": \"Kieth\",\n          \"Tone\": \"Adventure\",\n          \"Look\": \"Listener\",\n          \"View\": \"Normal\"\n        },\n        {\n          \"Speech\": \"We walked for hours, just exploring the different neighborhoods. Each one had its own unique charm.\",\n          \"Speaker\": \"Alice\",\n          \"Tone\": \"Adventure\",\n          \"Look\": \"Listener\",\n          \"View\": \"Normal\"\n        },\n        {\n          \"Speech\": \"Kieth, remember that time we got lost in the maze of the Tsukiji Fish Market? It was exhilarating but also a little scary!\",\n          \"Speaker\": \"Alice\",\n          \"Tone\": \"Adventure\",\n          \"Look\": \"Listener\",\n          \"View\": \"Focused\"\n        },\n        {\n          \"Speech\": \"Don't remind me! But the fresh sushi we ate made it all worth it. I've never tasted anything so good.\",\n          \"Speaker\": \"Kieth\",\n          \"Tone\": \"Adventure\",\n          \"Look\": \"Character\",\n          \"View\": \"Normal\"\n        }\n      ]\n    },\n    {\n      \"sceneName\": \"Kyoto Culture\",\n      \"backgroundImagePrompt\": \"An image of a tranquil garden in Kyoto, showcasing traditional Japanese architecture, serene ponds, and vibrant foliage.\",\n      \"script\": [\n        {\n          \"Speech\": \"From Tokyo, we took the bullet train to Kyoto, the ancient capital. It was like stepping back in time.\",\n          \"Speaker\": \"Kieth\",\n          \"Tone\": \"Adventure\",\n          \"Look\": \"Listener\",\n          \"View\": \"Focused\"\n        },\n        {\n          \"Speech\": \"We visited so many beautiful temples and shrines. Each one had its own story and significance. And the gardens...oh my, the gardens were pure zen.\",\n          \"Speaker\": \"Alice\",\n          \"Tone\": \"Adventure\",\n          \"Look\": \"Listener\",\n          \"View\": \"Normal\"\n        },\n        {\n          \"Speech\": \"Remember that time we saw geishas walking down the street in their beautiful kimonos? It was like something out of a movie.\",\n          \"Speaker\": \"Kieth\",\n          \"Tone\": \"Adventure\",\n          \"Look\": \"Listener\",\n          \"View\": \"Focused\"\n        },\n        {\n          \"Speech\": \"It was absolutely magical. And don't even get me started on the traditional tea ceremony we experienced! It was so peaceful and calming.\",\n          \"Speaker\": \"Alice\",\n          \"Tone\": \"Adventure\",\n          \"Look\": \"Character\",\n          \"View\": \"Normal\"\n        }\n      ]\n    },\n    {\n      \"sceneName\": \"Mount Fuji\",\n      \"backgroundImagePrompt\": \"A stunning image of Mount Fuji, showcasing its snow-capped peak rising majestically against a clear blue sky with a serene lake in the foreground.\",\n      \"script\": [\n        {\n          \"Speech\": \"Of course, no trip to Japan is complete without seeing Mount Fuji. It's so iconic and majestic. We hiked up part of the mountain, which was pretty challenging, but the view from the top was breathtaking.\",\n          \"Speaker\": \"Alice\",\n          \"Tone\": \"Adventure\",\n          \"Look\": \"Listener\",\n          \"View\": \"Focused\"\n        },\n        {\n          \"Speech\": \"And the hot springs we went to after the hike? Perfect way to unwind after all that exercise.\",\n          \"Speaker\": \"Kieth\",\n          \"Tone\": \"Adventure\",\n          \"Look\": \"Listener\",\n          \"View\": \"Normal\"\n        },\n        {\n          \"Speech\": \"That was a day we’ll never forget. It’s one of those experiences that stays with you forever.\",\n          \"Speaker\": \"Alice\",\n          \"Tone\": \"Adventure\",\n          \"Look\": \"Listener\",\n          \"View\": \"Focused\"\n        },\n        {\n          \"Speech\": \"Totally! And that’s just a small glimpse into our amazing Japan adventure. There was so much more - the street food, the people, the culture, the energy… We could talk for hours.\",\n          \"Speaker\": \"Kieth\",\n          \"Tone\": \"Adventure\",\n          \"Look\": \"Character\",\n          \"View\": \"Normal\"\n        }\n      ]\n    },\n    {\n      \"sceneName\": \"Outro\",\n      \"backgroundImagePrompt\": \"A final image showcasing a blend of iconic Japanese elements, like cherry blossoms, traditional architecture, and modern skyscrapers, to symbolize the unique and multifaceted experience of Japan.\",\n      \"script\": [\n        {\n          \"Speech\": \"We really encourage you to experience Japan for yourself! It's a truly unforgettable country, and we know you won't regret it.\",\n          \"Speaker\": \"Alice\",\n          \"Tone\": \"Adventure\",\n          \"Look\": \"Listener\",\n          \"View\": \"Focused\"\n        },\n        {\n          \"Speech\": \"Thanks for joining us on our Japan adventure! We hope we inspired you to explore this amazing country.\",\n          \"Speaker\": \"Kieth\",\n          \"Tone\": \"Adventure\",\n          \"Look\": \"Listener\",\n          \"View\": \"Focused\"\n        }\n      ]\n    }\n  ]\n}"},
      {text: "input: {\n\"prompt\": \"Benfits of yoga\", \n\"speakers\": [\"Alice\", \"Rohan\" ], \n\"tone\": \"Friendly\"\n}"},
      {text: "output: {\n  \"scenes\": [\n    {\n      \"sceneName\": \"Introduction to Yoga\",\n      \"backgroundImagePrompt\": \"A calming yoga studio with soft lighting and mats arranged for a class.\",\n      \"script\": [\n        {\n          \"Speech\": \"Hey everyone! Today we're diving into the wonderful world of yoga and its amazing benefits.\",\n          \"Speaker\": \"Alice\",\n          \"Tone\": \"Friendly\",\n          \"Look\": \"Listener\",\n          \"View\": \"Normal\"\n        },\n        {\n          \"Speech\": \"That's right, Alice! Yoga isn't just about bending and stretching; it's a holistic practice that can transform your mind and body.\",\n          \"Speaker\": \"Rohan\",\n          \"Tone\": \"Friendly\",\n          \"Look\": \"Character\",\n          \"View\": \"Normal\"\n        }\n      ]\n    },\n    {\n      \"sceneName\": \"Physical Benefits\",\n      \"backgroundImagePrompt\": \"A serene outdoor setting with people practicing yoga in nature.\",\n      \"script\": [\n        {\n          \"Speech\": \"One of the greatest benefits of yoga is its ability to enhance physical flexibility and strength.\",\n          \"Speaker\": \"Alice\",\n          \"Tone\": \"Friendly\",\n          \"Look\": \"Listener\",\n          \"View\": \"Normal\"\n        },\n        {\n          \"Speech\": \"Exactly! Regular practice can help improve posture, balance, and even alleviate back pain.\",\n          \"Speaker\": \"Rohan\",\n          \"Tone\": \"Friendly\",\n          \"Look\": \"Listener\",\n          \"View\": \"Focused\"\n        }\n      ]\n    },\n    {\n      \"sceneName\": \"Mental Benefits\",\n      \"backgroundImagePrompt\": \"A peaceful scene of meditation with soft candles and cushions.\",\n      \"script\": [\n        {\n          \"Speech\": \"But it’s not just about the body; yoga is fantastic for mental health too!\",\n          \"Speaker\": \"Alice\",\n          \"Tone\": \"Friendly\",\n          \"Look\": \"Character\",\n          \"View\": \"Normal\"\n        },\n        {\n          \"Speech\": \"Absolutely! It can help reduce stress, anxiety, and improve your overall mood.\",\n          \"Speaker\": \"Rohan\",\n          \"Tone\": \"Friendly\",\n          \"Look\": \"Listener\",\n          \"View\": \"Focused\"\n        }\n      ]\n    },\n    {\n      \"sceneName\": \"Conclusion\",\n      \"backgroundImagePrompt\": \"A beautiful sunset with silhouettes of people practicing yoga.\",\n      \"script\": [\n        {\n          \"Speech\": \"So whether you're a beginner or a seasoned yogi, incorporating yoga into your routine can bring a ton of benefits.\",\n          \"Speaker\": \"Alice\",\n          \"Tone\": \"Friendly\",\n          \"Look\": \"Listener\",\n          \"View\": \"Normal\"\n        },\n        {\n          \"Speech\": \"Thanks for joining us! We hope you feel inspired to roll out your mat and start your yoga journey.\",\n          \"Speaker\": \"Rohan\",\n          \"Tone\": \"Friendly\",\n          \"Look\": \"Character\",\n          \"View\": \"Normal\"\n        }\n      ]\n    }\n  ]\n}"},
      {text: "input: {\n\"prompt\": \"A cute discussion between 2 couples over there dreams\nand there future, \"speakers\": [ \"Bob\", \"Pam\" ],\n\"tone\": \"Friendly\" }"},
      {text: "output: {\n  \"scenes\": [\n    {\n      \"sceneName\": \"Cozy Cafe\",\n      \"backgroundImagePrompt\": \"A warm, inviting cafe with soft lighting, wooden tables, and potted plants, perfect for a friendly conversation.\",\n      \"script\": [\n        {\n          \"Speech\": \"So, Bob, what’s one dream you’ve always wanted to chase?\",\n          \"Speaker\": \"Pam\",\n          \"Tone\": \"Friendly\",\n          \"Look\": \"Listener\",\n          \"View\": \"Normal\"\n        },\n        {\n          \"Speech\": \"Honestly, I’ve always wanted to travel the world and experience different cultures. How about you?\",\n          \"Speaker\": \"Bob\",\n          \"Tone\": \"Friendly\",\n          \"Look\": \"Character\",\n          \"View\": \"Normal\"\n        },\n        {\n          \"Speech\": \"I dream of opening my own bakery one day. Imagine the sweet smell of fresh pastries every morning!\",\n          \"Speaker\": \"Pam\",\n          \"Tone\": \"Friendly\",\n          \"Look\": \"Listener\",\n          \"View\": \"Focused\"\n        }\n      ]\n    },\n    {\n      \"sceneName\": \"Sharing Aspirations\",\n      \"backgroundImagePrompt\": \"An inviting table with coffee cups and pastries, surrounded by a cozy cafe ambiance.\",\n      \"script\": [\n        {\n          \"Speech\": \"That sounds amazing! I can already picture it. What would you call it?\",\n          \"Speaker\": \"Bob\",\n          \"Tone\": \"Friendly\",\n          \"Look\": \"Character\",\n          \"View\": \"Normal\"\n        },\n        {\n          \"Speech\": \"I was thinking 'Pam’s Pastries'—simple but sweet, right?\",\n          \"Speaker\": \"Pam\",\n          \"Tone\": \"Friendly\",\n          \"Look\": \"Listener\",\n          \"View\": \"Focused\"\n        },\n        {\n          \"Speech\": \"Perfect! And I can help you set up a cozy corner for customers to enjoy their treats.\",\n          \"Speaker\": \"Bob\",\n          \"Tone\": \"Friendly\",\n          \"Look\": \"Character\",\n          \"View\": \"Normal\"\n        }\n      ]\n    },\n    {\n      \"sceneName\": \"Discussing Future Plans\",\n      \"backgroundImagePrompt\": \"A picturesque park with green trees, blooming flowers, and a walking path, ideal for a leisurely stroll.\",\n      \"script\": [\n        {\n          \"Speech\": \"What about family? Do you see kids in our future?\",\n          \"Speaker\": \"Pam\",\n          \"Tone\": \"Friendly\",\n          \"Look\": \"Listener\",\n          \"View\": \"Normal\"\n        },\n        {\n          \"Speech\": \"Definitely! I can picture us having a little one running around the bakery. It would be chaotic but fun!\",\n          \"Speaker\": \"Bob\",\n          \"Tone\": \"Friendly\",\n          \"Look\": \"Character\",\n          \"View\": \"Normal\"\n        },\n        {\n          \"Speech\": \"And maybe a dog too! A little furball to add to the family chaos.\",\n          \"Speaker\": \"Pam\",\n          \"Tone\": \"Friendly\",\n          \"Look\": \"Listener\",\n          \"View\": \"Focused\"\n        }\n      ]\n    },\n    {\n      \"sceneName\": \"Endearing Dreams\",\n      \"backgroundImagePrompt\": \"A beautiful sunset over the horizon, casting warm colors across a peaceful landscape, symbolizing dreams and future aspirations.\",\n      \"script\": [\n        {\n          \"Speech\": \"No matter where life takes us, I know we’ll make it work together.\",\n          \"Speaker\": \"Bob\",\n          \"Tone\": \"Friendly\",\n          \"Look\": \"Character\",\n          \"View\": \"Normal\"\n        },\n        {\n          \"Speech\": \"Absolutely! As long as we support each other, our dreams will become a reality.\",\n          \"Speaker\": \"Pam\",\n          \"Tone\": \"Friendly\",\n          \"Look\": \"Listener\",\n          \"View\": \"Normal\"\n        },\n        {\n          \"Speech\": \"Cheers to that! Here’s to dreaming big and living even bigger!\",\n          \"Speaker\": \"Bob\",\n          \"Tone\": \"Friendly\",\n          \"Look\": \"Character\",\n          \"View\": \"Focused\"\n        }\n      ]\n    }\n  ]\n}"},
      {text: "input: {\n\n  \"prompt\": \"Art\nExhibition\",\n\n  \"speakers\": [\n\n    \"Maya\",\n\n    \"Leo\"\n\n  ],\n\n  \"tone\": \"Inquisitive\"\n\n}"},
      {text: "output: {\n\n  \"imageGenerationGuideline\":\n\"Create a vibrant image capturing the atmosphere of an art exhibition,\nshowcasing various artworks, visitors interacting, and elegant gallery\nlighting.\",\n\n  \"scenes\": [\n\n    {\n\n      \"sceneName\": \"Intro\",\n\n      \"backgroundImagePrompt\":\n\"An image of an art gallery filled with colorful paintings and sculptures,\nwith people admiring the artworks.\",\n\n      \"script\": [\n\n        {\n\n          \"Speech\": \"Welcome\neveryone! Today we're diving into the world of art as we explore this fantastic\nexhibition.\",\n\n          \"Speaker\":\n\"Maya\",\n\n          \"Tone\":\n\"Inquisitive\",\n\n          \"Look\":\n\"Listener\",\n\n          \"View\": \"Speaker\"\n\n        },\n\n        {\n\n          \"Speech\": \"Absolutely!\nThere are so many amazing pieces here, I can't wait to share our\nthoughts.\",\n\n          \"Speaker\": \"Leo\",\n\n          \"Tone\":\n\"Inquisitive\",\n\n          \"Look\":\n\"Listener\",\n\n          \"View\": \"Speaker\"\n\n        }\n\n      ]\n\n    },\n\n    {\n\n      \"sceneName\": \"First\nImpression\",\n\n      \"backgroundImagePrompt\":\n\"An image focusing on a striking modern art piece, surrounded by\ncaptivated viewers.\",\n\n      \"script\": [\n\n        {\n\n          \"Speech\": \"Wow, look\nat that abstract piece! What do you think it represents?\",\n\n          \"Speaker\":\n\"Maya\",\n\n          \"Tone\":\n\"Inquisitive\",\n\n          \"Look\":\n\"Listener\",\n\n          \"View\": \"Speaker\"\n\n        },\n\n        {\n\n          \"Speech\": \"It feels\nlike a reflection of chaos and beauty intertwined. I love the colors!\",\n\n          \"Speaker\": \"Leo\",\n\n          \"Tone\":\n\"Inquisitive\",\n\n          \"Look\":\n\"Listener\",\n\n          \"View\": \"Speaker\"\n\n        },\n\n        {\n\n          \"Speech\": \"It's\nfascinating how art can evoke such strong emotions. Let's get closer!\",\n\n          \"Speaker\":\n\"Maya\",\n\n          \"Tone\":\n\"Inquisitive\",\n\n          \"Look\":\n\"Character\",\n\n          \"View\": \"All\"\n\n        }\n\n      ]\n\n    },\n\n    {\n\n      \"sceneName\": \"Artist's\nInspiration\",\n\n      \"backgroundImagePrompt\":\n\"An image of an artist’s studio, filled with sketches, paint, and\ncanvases, depicting the creative process.\",\n\n      \"script\": [\n\n        {\n\n          \"Speech\": \"Did you\nread about the artist's inspiration for this exhibition? It's\nincredible!\",\n\n          \"Speaker\": \"Leo\",\n\n          \"Tone\":\n\"Inquisitive\",\n\n          \"Look\":\n\"Listener\",\n\n          \"View\": \"Speaker\"\n\n        },\n\n        {\n\n          \"Speech\": \"I did! It's\namazing how personal experiences can shape their work.\",\n\n          \"Speaker\":\n\"Maya\",\n\n          \"Tone\":\n\"Inquisitive\",\n\n          \"Look\":\n\"Listener\",\n\n          \"View\": \"Speaker\"\n\n        },\n\n        {\n\n          \"Speech\": \"It makes me\nappreciate the artwork even more, knowing the story behind it.\",\n\n          \"Speaker\": \"Leo\",\n\n          \"Tone\":\n\"Inquisitive\",\n\n          \"Look\":\n\"Character\",\n\n          \"View\": \"All\"\n\n        }\n\n      ]\n\n    },\n\n    {\n\n      \"sceneName\": \"Closing\nThoughts\",\n\n      \"backgroundImagePrompt\":\n\"An image capturing the closing moments of the exhibition, with people\ndiscussing and exchanging ideas.\",\n\n      \"script\": [\n\n        {\n\n          \"Speech\": \"What a\nwonderful experience this has been! I feel inspired.\",\n\n          \"Speaker\":\n\"Maya\",\n\n          \"Tone\":\n\"Inquisitive\",\n\n          \"Look\":\n\"Listener\",\n\n          \"View\": \"Speaker\"\n\n        },\n\n        {\n\n          \"Speech\": \"Same here!\nArt truly has a unique way of connecting us all.\",\n\n          \"Speaker\": \"Leo\",\n\n          \"Tone\":\n\"Inquisitive\",\n\n          \"Look\":\n\"Listener\",\n\n          \"View\": \"Speaker\"\n\n        },\n\n        {\n\n          \"Speech\": \"Let's make\nit a point to visit more exhibitions together in the future!\",\n\n          \"Speaker\":\n\"Maya\",\n\n          \"Tone\":\n\"Inquisitive\",\n\n          \"Look\":\n\"Character\",\n\n          \"View\": \"All\"\n\n        }\n\n      ]\n\n    }\n\n  ]\n\n}"},
      {text: "input: {\n\n  \"prompt\": \"Diwali\nCelebration\",\n\n  \"speakers\": [\n\n    \"Anjali\",\n\n    \"Rahul\"\n\n  ],\n\n  \"tone\": \"Festive\"\n\n}"},
      {text: "output: {\n  \"imageGenerationGuideline\": \"Create a vibrant image capturing the essence of Diwali, showcasing beautifully decorated homes with diyas (lamps), colorful rangoli designs, and fireworks in the night sky.\",\n  \"scenes\": [\n    {\n      \"sceneName\": \"Intro\",\n      \"backgroundImagePrompt\": \"An image of a beautifully lit house adorned with diyas and colorful decorations, symbolizing the spirit of Diwali.\",\n      \"script\": [\n        {\n          \"Speech\": \"Happy Diwali everyone! We’re so excited to share how we celebrate this amazing festival.\",\n          \"Speaker\": \"Anjali\",\n          \"Tone\": \"Festive\",\n          \"Look\": \"Listener\",\n          \"View\": \"Focused\"\n        },\n        {\n          \"Speech\": \"Yes! Diwali is all about lights, sweets, and togetherness. Let’s dive into our traditions.\",\n          \"Speaker\": \"Rahul\",\n          \"Tone\": \"Festive\",\n          \"Look\": \"Listener\",\n          \"View\": \"Normal\"\n        }\n      ]\n    },\n    {\n      \"sceneName\": \"Rangoli Making\",\n      \"backgroundImagePrompt\": \"An image of colorful rangoli designs being created at the entrance of a home, surrounded by vibrant colors and patterns.\",\n      \"script\": [\n        {\n          \"Speech\": \"One of my favorite parts of Diwali is making rangoli. It's such a beautiful way to welcome guests!\",\n          \"Speaker\": \"Anjali\",\n          \"Tone\": \"Festive\",\n          \"Look\": \"Listener\",\n          \"View\": \"Normal\"\n        },\n        {\n          \"Speech\": \"Absolutely! The colors just brighten up the entire space. What’s your favorite design?\",\n          \"Speaker\": \"Rahul\",\n          \"Tone\": \"Festive\",\n          \"Look\": \"Listener\",\n          \"View\": \"Normal\"\n        },\n        {\n          \"Speech\": \"I love floral patterns. They represent freshness and positivity!\",\n          \"Speaker\": \"Anjali\",\n          \"Tone\": \"Festive\",\n          \"Look\": \"Character\",\n          \"View\": \"Normal\"\n        }\n      ]\n    },\n    {\n      \"sceneName\": \"Lighting Diyas\",\n      \"backgroundImagePrompt\": \"An image of family members lighting diyas together, filling the room with a warm, golden glow.\",\n      \"script\": [\n        {\n          \"Speech\": \"And then there's the ritual of lighting diyas. It's so fulfilling to see the entire house illuminated!\",\n          \"Speaker\": \"Rahul\",\n          \"Tone\": \"Festive\",\n          \"Look\": \"Listener\",\n          \"View\": \"Normal\"\n        },\n        {\n          \"Speech\": \"Yes! It symbolizes the victory of light over darkness. Do you have a favorite diya?\",\n          \"Speaker\": \"Anjali\",\n          \"Tone\": \"Festive\",\n          \"Look\": \"Listener\",\n          \"View\": \"Normal\"\n        },\n        {\n          \"Speech\": \"I love the traditional earthen diyas. They have such an authentic feel to them.\",\n          \"Speaker\": \"Rahul\",\n          \"Tone\": \"Festive\",\n          \"Look\": \"Listener\",\n          \"View\": \"Focused\"\n        }\n      ]\n    },\n    {\n      \"sceneName\": \"Fireworks\",\n      \"backgroundImagePrompt\": \"An image of a night sky filled with vibrant fireworks, creating a magical atmosphere during the Diwali celebrations.\",\n      \"script\": [\n        {\n          \"Speech\": \"And who can forget the fireworks? They add so much excitement to the night!\",\n          \"Speaker\": \"Anjali\",\n          \"Tone\": \"Festive\",\n          \"Look\": \"Listener\",\n          \"View\": \"Normal\"\n        },\n        {\n          \"Speech\": \"I love how everyone gathers to watch the sky light up. It feels so communal.\",\n          \"Speaker\": \"Rahul\",\n          \"Tone\": \"Festive\",\n          \"Look\": \"Listener\",\n          \"View\": \"Normal\"\n        },\n        {\n          \"Speech\": \"It really brings everyone together. Let’s make sure to capture some pictures this year!\",\n          \"Speaker\": \"Anjali\",\n          \"Tone\": \"Festive\",\n          \"Look\": \"Listener\",\n          \"View\": \"Focused\"\n        }\n      ]\n    },\n    {\n      \"sceneName\": \"Closing Thoughts\",\n      \"backgroundImagePrompt\": \"An image of family members sharing sweets and laughter around a festive table decorated for Diwali.\",\n      \"script\": [\n        {\n          \"Speech\": \"So that’s a glimpse into how we celebrate Diwali! It’s filled with love, laughter, and lots of sweets.\",\n          \"Speaker\": \"Rahul\",\n          \"Tone\": \"Festive\",\n          \"Look\": \"Listener\",\n          \"View\": \"Normal\"\n        },\n        {\n          \"Speech\": \"We hope you all have a wonderful Diwali filled with joy and togetherness!\",\n          \"Speaker\": \"Anjali\",\n          \"Tone\": \"Festive\",\n          \"Look\": \"Listener\",\n          \"View\": \"Normal\"\n        }\n      ]\n    }\n  ]\n}"},
      {text: `input: ${JSON.stringify(prompt)}`},
      {text: "output: "},
    ];
  
    const result = await model.generateContent({
      contents: [{ role: "user", parts }],
      generationConfig,
    });

    //console.log(result.response.text());
    return result.response.text();
  }

  export default generateScript;
