import { GoogleGenerativeAI } from "@google/generative-ai";
import dotenv from 'dotenv';
dotenv.config();
  
  const apiKey = process.env.GEMINI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-1.5-flash",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 64,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  
 async function generateScript(prompt) {
     console.log(prompt);
    const parts = [
      {text: "{\n  \"taskDescription\": \"Your task is to generate a structured narrative script where speakers interact with each other and with the listener. The script should be broken down into multiple scenes, each containing a background image prompt and a dialogue array that specifies what each character says, how they say it, and how they appear in the scene.\",\n\n  \"formatGuidelines\": {\n    \"sceneObject\": {\n      \"sceneName\": \"A descriptive name for the scene that highlights its setting or location.\",\n      \"backgroundImagePrompt\": \"Include a prompt to create a background image that depicts the setting of the scene without any characters. For example, if the scene is set in a kitchen, the background should show a kitchen without any people.\",\n      \"script\": [\n        {\n          \"speech\": \"The line spoken by the character in this scene.\",\n          \"speaker\": \"The name of the character speaking the line.\",\n          \"tone\": \"The tone of the line (e.g., excited, mysterious, calm).\",\n          \"look\": \"The direction of the speaker's gaze: can only be 'listener' or 'character'.\",\n          \"view\": \"The perspective of the scene: can only be 'speaker' or 'All'.\"\n        }\n      ]\n    }\n  },\n\n  \"input\": {\n    \"prompt\": \"A single string that describes the narrative topic, giving enough context for the AI to generate scenes and a script with interactions between characters.\",\n    \"speakers\": [\n      \"Name of Speaker 1\",\n      \"Name of Speaker 2\",\n      \"...additional speakers...\"\n    ],\n    \"tone\": \"The overall tone of the narrative (e.g., mystery, adventure, comedy, etc.).\"\n  },\n\n  \"exampleOutputFormat\": {\n    \"imageGenerationGuideline\": \"Provide background image generation guidelines based on the setting, ensuring it only depicts the background without any characters.\",\n    \"scenes\": [\n      {\n        \"sceneName\": \"Example Scene Name\",\n        \"backgroundImagePrompt\": \"A brief description of the background that should not involve speakers and fits the scene.\",\n        \"script\": [\n          {\n            \"speech\": \"A sample line of dialogue from a character.\",\n            \"speaker\": \"Character Name\",\n            \"tone\": \"Tone of the spoken line.\",\n            \"look\": \"The direction of the speaker's gaze, either 'listener' or 'character'.\",\n            \"view\": \"The view perspective for this line, either 'speaker' or 'All'.\"\n          },\n          {\n            \"speech\": \"Another sample line of dialogue.\",\n            \"speaker\": \"Another Character Name\",\n            \"tone\": \"Tone of the spoken line.\",\n            \"look\": \"The direction of the speaker's gaze, either 'listener' or 'character'.\",\n            \"view\": \"The view perspective for this line, either 'speaker' or 'All'.\"\n          }\n        ]\n      }\n    ]\n  }\n}"},
      {text: "input: {\n\n  \"prompt\": \"A trip to Japan\nwhere two friends explore the bustling streets of Tokyo and the calm temples of\nKyoto.\",\n\n  \"speakers\": [\n\n    \"Kieth\",\n\n    \"Alice\"\n\n  ],\n\n  \"tone\": \"Adventure\"\n\n}"},
      {text: "output: {\n\n  \"imageGenerationGuideline\":\n\"Create a visually engaging image that reflects the excitement and\ncultural immersion of a trip to Japan. Consider showcasing iconic landmarks\nlike Mount Fuji, bustling city streets, serene gardens, and colorful\ntemples.\",\n\n  \"scenes\": [\n\n    {\n\n      \"sceneName\": \"Intro\",\n\n      \"backgroundImagePrompt\":\n\"A vibrant image capturing the energy and beauty of Tokyo, featuring neon\nlights, bustling streets, and the iconic Shibuya crossing.\",\n\n      \"script\": [\n\n        {\n\n          \"Speech\": \"Hey\neveryone, welcome back! Today we're sharing an experience that's still making\nus smile weeks later.\",\n\n          \"Speaker\":\n\"Kieth\",\n\n          \"Tone\":\n\"Adventure\",\n\n          \"Look\":\n\"Listener\",\n\n          \"View\": \"Speaker\"\n\n        },\n\n        {\n\n          \"Speech\": \"Yep, we're\ntalking about our amazing trip to Japan! Get ready for a whirlwind of culture,\ndelicious food, and incredible sights.\",\n\n          \"Speaker\":\n\"Alice\",\n\n          \"Tone\":\n\"Adventure\",\n\n          \"Look\":\n\"Listener\",\n\n          \"View\": \"Speaker\"\n\n        },\n\n        {\n\n          \"Speech\": \"It was\ntruly a trip of a lifetime. We were blown away by everything from the ancient\ntemples to the futuristic technology.\",\n\n          \"Speaker\":\n\"Kieth\",\n\n          \"Tone\":\n\"Adventure\",\n\n          \"Look\":\n\"Listener\",\n\n          \"View\": \"Speaker\"\n\n        },\n\n        {\n\n          \"Speech\": \"And let's\nnot forget the ramen! We tried so many different kinds. It was seriously a food\ncoma dream.\",\n\n          \"Speaker\":\n\"Alice\",\n\n          \"Tone\":\n\"Adventure\",\n\n          \"Look\":\n\"Listener\",\n\n          \"View\": \"Speaker\"\n\n        }\n\n      ]\n\n    },\n\n    {\n\n      \"sceneName\": \"Tokyo\nAdventure\",\n\n      \"backgroundImagePrompt\":\n\"An image depicting a bustling street scene in Tokyo with vibrant neon\nsigns, traditional shops, and people wearing colorful clothing.\",\n\n      \"script\": [\n\n        {\n\n          \"Speech\": \"So, we\nlanded in Tokyo, the heart of Japan, and were instantly mesmerized by the\nenergy. It's like a constant, exciting symphony of sights and sounds.\",\n\n          \"Speaker\":\n\"Kieth\",\n\n          \"Tone\":\n\"Adventure\",\n\n          \"Look\":\n\"Listener\",\n\n          \"View\": \"Speaker\"\n\n        },\n\n        {\n\n          \"Speech\": \"We walked\nfor hours, just exploring the different neighborhoods. Each one had its own\nunique charm.\",\n\n          \"Speaker\":\n\"Alice\",\n\n          \"Tone\":\n\"Adventure\",\n\n          \"Look\":\n\"Listener\",\n\n          \"View\": \"Speaker\"\n\n        },\n\n        {\n\n          \"Speech\": \"Kieth,\nremember that time we got lost in the maze of the Tsukiji Fish Market? It was\nexhilarating but also a little scary!\",\n\n          \"Speaker\":\n\"Alice\",\n\n          \"Tone\":\n\"Adventure\",\n\n          \"Look\":\n\"Character\",\n\n          \"View\": \"All\"\n\n        },\n\n        {\n\n          \"Speech\": \"Don't\nremind me! But the fresh sushi we ate made it all worth it. I've never tasted\nanything so good.\",\n\n          \"Speaker\":\n\"Kieth\",\n\n          \"Tone\":\n\"Adventure\",\n\n          \"Look\":\n\"Character\",\n\n          \"View\": \"All\"\n\n        }\n\n      ]\n\n    },\n\n    {\n\n      \"sceneName\": \"Kyoto\nCulture\",\n\n      \"backgroundImagePrompt\":\n\"An image of a tranquil garden in Kyoto, showcasing traditional Japanese\narchitecture, serene ponds, and vibrant foliage.\",\n\n      \"script\": [\n\n        {\n\n          \"Speech\": \"From Tokyo,\nwe took the bullet train to Kyoto, the ancient capital. It was like stepping\nback in time.\",\n\n          \"Speaker\":\n\"Kieth\",\n\n          \"Tone\":\n\"Adventure\",\n\n          \"Look\":\n\"Listener\",\n\n          \"View\": \"Speaker\"\n\n        },\n\n        {\n\n          \"Speech\": \"We visited\nso many beautiful temples and shrines. Each one had its own story and\nsignificance. And the gardens...oh my, the gardens were pure zen.\",\n\n          \"Speaker\":\n\"Alice\",\n\n          \"Tone\":\n\"Adventure\",\n\n          \"Look\":\n\"Listener\",\n\n          \"View\": \"Speaker\"\n\n        },\n\n        {\n\n          \"Speech\": \"Remember\nthat time we saw geishas walking down the street in their beautiful kimonos? It\nwas like something out of a movie.\",\n\n          \"Speaker\":\n\"Kieth\",\n\n          \"Tone\":\n\"Adventure\",\n\n          \"Look\":\n\"Character\",\n\n          \"View\": \"All\"\n\n        },\n\n        {\n\n          \"Speech\": \"It was\nabsolutely magical. And don't even get me started on the traditional tea\nceremony we experienced! It was so peaceful and calming.\",\n\n          \"Speaker\":\n\"Alice\",\n\n          \"Tone\":\n\"Adventure\",\n\n          \"Look\":\n\"Character\",\n\n          \"View\": \"All\"\n\n        }\n\n      ]\n\n    },\n\n    {\n\n      \"sceneName\": \"Mount\nFuji\",\n\n      \"backgroundImagePrompt\":\n\"A stunning image of Mount Fuji, showcasing its snow-capped peak rising\nmajestically against a clear blue sky with a serene lake in the\nforeground.\",\n\n      \"script\": [\n\n        {\n\n          \"Speech\": \"Of course,\nno trip to Japan is complete without seeing Mount Fuji. It's so iconic and\nmajestic. We hiked up part of the mountain, which was pretty challenging, but\nthe view from the top was breathtaking.\",\n\n          \"Speaker\":\n\"Alice\",\n\n          \"Tone\":\n\"Adventure\",\n\n          \"Look\":\n\"Listener\",\n\n          \"View\": \"Speaker\"\n\n        },\n\n        {\n\n          \"Speech\": \"And the hot\nsprings we went to after the hike? Perfect way to unwind after all that\nexercise.\",\n\n          \"Speaker\":\n\"Kieth\",\n\n          \"Tone\":\n\"Adventure\",\n\n          \"Look\":\n\"Listener\",\n\n          \"View\": \"Speaker\"\n\n        },\n\n        {\n\n          \"Speech\": \"That was a\nday we’ll never forget. It’s one of those experiences that stays with you\nforever.\",\n\n          \"Speaker\":\n\"Alice\",\n\n          \"Tone\":\n\"Adventure\",\n\n          \"Look\":\n\"Character\",\n\n          \"View\": \"All\"\n\n        },\n\n        {\n\n          \"Speech\": \"Totally!\nAnd that’s just a small glimpse into our amazing Japan adventure. There was so\nmuch more - the street food, the people, the culture, the energy… We could talk\nfor hours.\",\n\n          \"Speaker\":\n\"Kieth\",\n\n          \"Tone\":\n\"Adventure\",\n\n          \"Look\":\n\"Character\",\n\n          \"View\": \"All\"\n\n        }\n\n      ]\n\n    },\n\n    {\n\n      \"sceneName\": \"Outro\",\n\n      \"backgroundImagePrompt\":\n\"A final image showcasing a blend of iconic Japanese elements, like cherry\nblossoms, traditional architecture, and modern skyscrapers, to symbolize the\nunique and multifaceted experience of Japan.\",\n\n      \"script\": [\n\n        {\n\n          \"Speech\": \"We really\nencourage you to experience Japan for yourself! It's a truly unforgettable\ncountry, and we know you won't regret it.\",\n\n          \"Speaker\":\n\"Alice\",\n\n          \"Tone\":\n\"Adventure\",\n\n          \"Look\":\n\"Listener\",\n\n          \"View\": \"Speaker\"\n\n        },\n\n        {\n\n          \"Speech\": \"Thanks for\njoining us on our Japan adventure! We hope we inspired you to explore this\namazing country.\",\n\n          \"Speaker\":\n\"Kieth\",\n\n          \"Tone\":\n\"Adventure\",\n\n          \"Look\":\n\"Listener\",\n\n          \"View\": \"Speaker\"\n\n        }\n\n      ]\n\n    }\n\n  ]\n\n}"},
      {text: "input: {\n\"prompt\": \"Benfits of yoga\", \n\"speakers\": [\"Alice\", \"Rohan\" ], \n\"tone\": \"Friendly\"\n}"},
      {text: "output: {\n\"scenes\": [ { \"sceneName\": \"Introduction to\nYoga\", \"backgroundImagePrompt\": \"A calming yoga studio with\nsoft lighting and mats arranged for a class.\", \"script\": [ {\n\"Speech\": \"Hey everyone! Today we're diving into the wonderful\nworld of yoga and its amazing benefits.\", \"Speaker\":\n\"Alice\", \"Tone\": \"Friendly\" }, {\n\"Speech\": \"That's right, Alice! Yoga isn't just about bending\nand stretching; it's a holistic practice that can transform your mind and\nbody.\", \"Speaker\": \"Rohan\", \"Tone\":\n\"Friendly\" } ] }, { \"sceneName\": \"Physical\nBenefits\", \"backgroundImagePrompt\": \"A serene outdoor\nsetting with people practicing yoga in nature.\", \"script\": [ {\n\"Speech\": \"One of the greatest benefits of yoga is its ability\nto enhance physical flexibility and strength.\", \"Speaker\":\n\"Alice\", \"Tone\": \"Friendly\" }, {\n\"Speech\": \"Exactly! Regular practice can help improve posture,\nbalance, and even alleviate back pain.\", \"Speaker\":\n\"Rohan\", \"Tone\": \"Friendly\" } ] }, {\n\"sceneName\": \"Mental Benefits\",\n\"backgroundImagePrompt\": \"A peaceful scene of meditation with\nsoft candles and cushions.\", \"script\": [ { \"Speech\":\n\"But it’s not just about the body; yoga is fantastic for mental health\ntoo!\", \"Speaker\": \"Alice\", \"Tone\":\n\"Friendly\" }, { \"Speech\": \"Absolutely! It can help\nreduce stress, anxiety, and improve your overall mood.\",\n\"Speaker\": \"Rohan\", \"Tone\": \"Friendly\"\n} ] }, { \"sceneName\": \"Conclusion\",\n\"backgroundImagePrompt\": \"A beautiful sunset with silhouettes of\npeople practicing yoga.\", \"script\": [ { \"Speech\":\n\"So whether you're a beginner or a seasoned yogi, incorporating yoga into\nyour routine can bring a ton of benefits.\", \"Speaker\":\n\"Alice\", \"Tone\": \"Friendly\" }, {\n\"Speech\": \"Thanks for joining us! We hope you feel inspired to\nroll out your mat and start your yoga journey.\", \"Speaker\":\n\"Rohan\", \"Tone\": \"Friendly\" } ] } ] }"},
      {text: "input: {\n\"prompt\": \"A cute discussion between 2 couples over there dreams\nand there future, \"speakers\": [ \"Bob\", \"Pam\" ],\n\"tone\": \"Friendly\" }"},
      {text: "output: {\n\n  \"scenes\": [\n\n    {\n\n      \"sceneName\": \"Cozy\nCafe\",\n\n      \"backgroundImagePrompt\":\n\"A warm, inviting cafe with soft lighting, wooden tables, and potted\nplants, perfect for a friendly conversation.\",\n\n      \"script\": [\n\n        {\n\n          \"Speech\": \"So, Bob,\nwhat’s one dream you’ve always wanted to chase?\",\n\n          \"Speaker\": \"Pam\",\n\n          \"Tone\":\n\"Friendly\"\n\n        },\n\n        {\n\n          \"Speech\": \"Honestly,\nI’ve always wanted to travel the world and experience different cultures. How\nabout you?\",\n\n          \"Speaker\": \"Bob\",\n\n          \"Tone\":\n\"Friendly\"\n\n        },\n\n        {\n\n          \"Speech\": \"I dream of\nopening my own bakery one day. Imagine the sweet smell of fresh pastries every\nmorning!\",\n\n          \"Speaker\": \"Pam\",\n\n          \"Tone\":\n\"Friendly\"\n\n        }\n\n      ]\n\n    },\n\n    {\n\n      \"sceneName\": \"Sharing\nAspirations\",\n\n      \"backgroundImagePrompt\":\n\"An inviting table with coffee cups and pastries, surrounded by a cozy\ncafe ambiance.\",\n\n      \"script\": [\n\n        {\n\n          \"Speech\": \"That sounds\namazing! I can already picture it. What would you call it?\",\n\n          \"Speaker\": \"Bob\",\n\n          \"Tone\":\n\"Friendly\"\n\n        },\n\n        {\n\n          \"Speech\": \"I was\nthinking 'Pam’s Pastries'—simple but sweet, right?\",\n\n          \"Speaker\": \"Pam\",\n\n          \"Tone\":\n\"Friendly\"\n\n        },\n\n        {\n\n          \"Speech\": \"Perfect!\nAnd I can help you set up a cozy corner for customers to enjoy their\ntreats.\",\n\n          \"Speaker\": \"Bob\",\n\n          \"Tone\":\n\"Friendly\"\n\n        }\n\n      ]\n\n    },\n\n    {\n\n      \"sceneName\": \"Discussing\nFuture Plans\",\n\n      \"backgroundImagePrompt\":\n\"A picturesque park with green trees, blooming flowers, and a walking\npath, ideal for a leisurely stroll.\",\n\n      \"script\": [\n\n        {\n\n          \"Speech\": \"What about\nfamily? Do you see kids in our future?\",\n\n          \"Speaker\": \"Pam\",\n\n          \"Tone\":\n\"Friendly\"\n\n        },\n\n        {\n\n          \"Speech\": \"Definitely!\nI can picture us having a little one running around the bakery. It would be\nchaotic but fun!\",\n\n          \"Speaker\": \"Bob\",\n\n          \"Tone\":\n\"Friendly\"\n\n        },\n\n        {\n\n          \"Speech\": \"And maybe a\ndog too! A little furball to add to the family chaos.\",\n\n          \"Speaker\": \"Pam\",\n\n          \"Tone\":\n\"Friendly\"\n\n        }\n\n      ]\n\n    },\n\n    {\n\n      \"sceneName\": \"Endearing\nDreams\",\n\n      \"backgroundImagePrompt\":\n\"A beautiful sunset over the horizon, casting warm colors across a\npeaceful landscape, symbolizing dreams and future aspirations.\",\n\n      \"script\": [\n\n        {\n\n          \"Speech\": \"No matter\nwhere life takes us, I know we’ll make it work together.\",\n\n          \"Speaker\": \"Bob\",\n\n          \"Tone\":\n\"Friendly\"\n\n        },\n\n        {\n\n          \"Speech\": \"Absolutely!\nAs long as we support each other, our dreams will become a reality.\",\n\n          \"Speaker\": \"Pam\",\n\n          \"Tone\":\n\"Friendly\"\n\n        },\n\n        {\n\n          \"Speech\": \"Cheers to\nthat! Here’s to dreaming big and living even bigger!\",\n\n          \"Speaker\": \"Bob\",\n\n          \"Tone\":\n\"Friendly\"\n\n        }\n\n      ]\n\n    }\n\n  ]\n\n}"},
      {text: "input: {\n\n  \"prompt\": \"Art\nExhibition\",\n\n  \"speakers\": [\n\n    \"Maya\",\n\n    \"Leo\"\n\n  ],\n\n  \"tone\": \"Inquisitive\"\n\n}"},
      {text: "output: {\n\n  \"imageGenerationGuideline\":\n\"Create a vibrant image capturing the atmosphere of an art exhibition,\nshowcasing various artworks, visitors interacting, and elegant gallery\nlighting.\",\n\n  \"scenes\": [\n\n    {\n\n      \"sceneName\": \"Intro\",\n\n      \"backgroundImagePrompt\":\n\"An image of an art gallery filled with colorful paintings and sculptures,\nwith people admiring the artworks.\",\n\n      \"script\": [\n\n        {\n\n          \"Speech\": \"Welcome\neveryone! Today we're diving into the world of art as we explore this fantastic\nexhibition.\",\n\n          \"Speaker\":\n\"Maya\",\n\n          \"Tone\":\n\"Inquisitive\",\n\n          \"Look\":\n\"Listener\",\n\n          \"View\": \"Speaker\"\n\n        },\n\n        {\n\n          \"Speech\": \"Absolutely!\nThere are so many amazing pieces here, I can't wait to share our\nthoughts.\",\n\n          \"Speaker\": \"Leo\",\n\n          \"Tone\":\n\"Inquisitive\",\n\n          \"Look\":\n\"Listener\",\n\n          \"View\": \"Speaker\"\n\n        }\n\n      ]\n\n    },\n\n    {\n\n      \"sceneName\": \"First\nImpression\",\n\n      \"backgroundImagePrompt\":\n\"An image focusing on a striking modern art piece, surrounded by\ncaptivated viewers.\",\n\n      \"script\": [\n\n        {\n\n          \"Speech\": \"Wow, look\nat that abstract piece! What do you think it represents?\",\n\n          \"Speaker\":\n\"Maya\",\n\n          \"Tone\":\n\"Inquisitive\",\n\n          \"Look\":\n\"Listener\",\n\n          \"View\": \"Speaker\"\n\n        },\n\n        {\n\n          \"Speech\": \"It feels\nlike a reflection of chaos and beauty intertwined. I love the colors!\",\n\n          \"Speaker\": \"Leo\",\n\n          \"Tone\":\n\"Inquisitive\",\n\n          \"Look\":\n\"Listener\",\n\n          \"View\": \"Speaker\"\n\n        },\n\n        {\n\n          \"Speech\": \"It's\nfascinating how art can evoke such strong emotions. Let's get closer!\",\n\n          \"Speaker\":\n\"Maya\",\n\n          \"Tone\":\n\"Inquisitive\",\n\n          \"Look\":\n\"Character\",\n\n          \"View\": \"All\"\n\n        }\n\n      ]\n\n    },\n\n    {\n\n      \"sceneName\": \"Artist's\nInspiration\",\n\n      \"backgroundImagePrompt\":\n\"An image of an artist’s studio, filled with sketches, paint, and\ncanvases, depicting the creative process.\",\n\n      \"script\": [\n\n        {\n\n          \"Speech\": \"Did you\nread about the artist's inspiration for this exhibition? It's\nincredible!\",\n\n          \"Speaker\": \"Leo\",\n\n          \"Tone\":\n\"Inquisitive\",\n\n          \"Look\":\n\"Listener\",\n\n          \"View\": \"Speaker\"\n\n        },\n\n        {\n\n          \"Speech\": \"I did! It's\namazing how personal experiences can shape their work.\",\n\n          \"Speaker\":\n\"Maya\",\n\n          \"Tone\":\n\"Inquisitive\",\n\n          \"Look\":\n\"Listener\",\n\n          \"View\": \"Speaker\"\n\n        },\n\n        {\n\n          \"Speech\": \"It makes me\nappreciate the artwork even more, knowing the story behind it.\",\n\n          \"Speaker\": \"Leo\",\n\n          \"Tone\":\n\"Inquisitive\",\n\n          \"Look\":\n\"Character\",\n\n          \"View\": \"All\"\n\n        }\n\n      ]\n\n    },\n\n    {\n\n      \"sceneName\": \"Closing\nThoughts\",\n\n      \"backgroundImagePrompt\":\n\"An image capturing the closing moments of the exhibition, with people\ndiscussing and exchanging ideas.\",\n\n      \"script\": [\n\n        {\n\n          \"Speech\": \"What a\nwonderful experience this has been! I feel inspired.\",\n\n          \"Speaker\":\n\"Maya\",\n\n          \"Tone\":\n\"Inquisitive\",\n\n          \"Look\":\n\"Listener\",\n\n          \"View\": \"Speaker\"\n\n        },\n\n        {\n\n          \"Speech\": \"Same here!\nArt truly has a unique way of connecting us all.\",\n\n          \"Speaker\": \"Leo\",\n\n          \"Tone\":\n\"Inquisitive\",\n\n          \"Look\":\n\"Listener\",\n\n          \"View\": \"Speaker\"\n\n        },\n\n        {\n\n          \"Speech\": \"Let's make\nit a point to visit more exhibitions together in the future!\",\n\n          \"Speaker\":\n\"Maya\",\n\n          \"Tone\":\n\"Inquisitive\",\n\n          \"Look\":\n\"Character\",\n\n          \"View\": \"All\"\n\n        }\n\n      ]\n\n    }\n\n  ]\n\n}"},
      {text: "input: {\n\n  \"prompt\": \"Diwali\nCelebration\",\n\n  \"speakers\": [\n\n    \"Anjali\",\n\n    \"Rahul\"\n\n  ],\n\n  \"tone\": \"Festive\"\n\n}"},
      {text: "output: {\n\n  \"imageGenerationGuideline\":\n\"Create a vibrant image capturing the essence of Diwali, showcasing\nbeautifully decorated homes with diyas (lamps), colorful rangoli designs, and\nfireworks in the night sky.\",\n\n  \"scenes\": [\n\n    {\n\n      \"sceneName\": \"Intro\",\n\n      \"backgroundImagePrompt\":\n\"An image of a beautifully lit house adorned with diyas and colorful\ndecorations, symbolizing the spirit of Diwali.\",\n\n      \"script\": [\n\n        {\n\n          \"Speech\": \"Happy\nDiwali everyone! We’re so excited to share how we celebrate this amazing\nfestival.\",\n\n          \"Speaker\":\n\"Anjali\",\n\n          \"Tone\":\n\"Festive\",\n\n          \"Look\":\n\"Listener\",\n\n          \"View\": \"Speaker\"\n\n        },\n\n        {\n\n          \"Speech\": \"Yes! Diwali\nis all about lights, sweets, and togetherness. Let’s dive into our\ntraditions.\",\n\n          \"Speaker\":\n\"Rahul\",\n\n          \"Tone\":\n\"Festive\",\n\n          \"Look\":\n\"Listener\",\n\n          \"View\": \"Speaker\"\n\n        }\n\n      ]\n\n    },\n\n    {\n\n      \"sceneName\": \"Rangoli\nMaking\",\n\n      \"backgroundImagePrompt\":\n\"An image of colorful rangoli designs being created at the entrance of a\nhome, surrounded by vibrant colors and patterns.\",\n\n      \"script\": [\n\n        {\n\n          \"Speech\": \"One of my\nfavorite parts of Diwali is making rangoli. It's such a beautiful way to\nwelcome guests!\",\n\n          \"Speaker\":\n\"Anjali\",\n\n          \"Tone\":\n\"Festive\",\n\n          \"Look\":\n\"Listener\",\n\n          \"View\": \"Speaker\"\n\n        },\n\n        {\n\n          \"Speech\": \"Absolutely!\nThe colors just brighten up the entire space. What’s your favorite\ndesign?\",\n\n          \"Speaker\":\n\"Rahul\",\n\n          \"Tone\":\n\"Festive\",\n\n          \"Look\":\n\"Listener\",\n\n          \"View\": \"Speaker\"\n\n        },\n\n        {\n\n          \"Speech\": \"I love\nfloral patterns. They represent freshness and positivity!\",\n\n          \"Speaker\":\n\"Anjali\",\n\n          \"Tone\":\n\"Festive\",\n\n          \"Look\":\n\"Character\",\n\n          \"View\": \"All\"\n\n        }\n\n      ]\n\n    },\n\n    {\n\n      \"sceneName\": \"Lighting\nDiyas\",\n\n      \"backgroundImagePrompt\":\n\"An image of family members lighting diyas together, filling the room with\na warm, golden glow.\",\n\n      \"script\": [\n\n        {\n\n          \"Speech\": \"And then\nthere's the ritual of lighting diyas. It's so fulfilling to see the entire\nhouse illuminated!\",\n\n          \"Speaker\":\n\"Rahul\",\n\n          \"Tone\":\n\"Festive\",\n\n          \"Look\":\n\"Listener\",\n\n          \"View\": \"Speaker\"\n\n        },\n\n        {\n\n          \"Speech\": \"Yes! It\nsymbolizes the victory of light over darkness. Do you have a favorite\ndiya?\",\n\n          \"Speaker\":\n\"Anjali\",\n\n          \"Tone\":\n\"Festive\",\n\n          \"Look\":\n\"Listener\",\n\n          \"View\": \"Speaker\"\n\n        },\n\n        {\n\n          \"Speech\": \"I love the\ntraditional earthen diyas. They have such an authentic feel to them.\",\n\n          \"Speaker\":\n\"Rahul\",\n\n          \"Tone\":\n\"Festive\",\n\n          \"Look\":\n\"Character\",\n\n          \"View\": \"All\"\n\n        }\n\n      ]\n\n    },\n\n    {\n\n      \"sceneName\":\n\"Fireworks\",\n\n      \"backgroundImagePrompt\":\n\"An image of a night sky filled with vibrant fireworks, creating a magical\natmosphere during the Diwali celebrations.\",\n\n      \"script\": [\n\n        {\n\n          \"Speech\": \"And who can\nforget the fireworks? They add so much excitement to the night!\",\n\n          \"Speaker\":\n\"Anjali\",\n\n          \"Tone\":\n\"Festive\",\n\n          \"Look\":\n\"Listener\",\n\n          \"View\": \"Speaker\"\n\n        },\n\n        {\n\n          \"Speech\": \"I love how\neveryone gathers to watch the sky light up. It feels so communal.\",\n\n          \"Speaker\":\n\"Rahul\",\n\n          \"Tone\":\n\"Festive\",\n\n          \"Look\":\n\"Listener\",\n\n          \"View\": \"Speaker\"\n\n        },\n\n        {\n\n          \"Speech\": \"It really\nbrings everyone together. Let’s make sure to capture some pictures this\nyear!\",\n\n          \"Speaker\":\n\"Anjali\",\n\n          \"Tone\":\n\"Festive\",\n\n          \"Look\":\n\"Character\",\n\n          \"View\": \"All\"\n\n        }\n\n      ]\n\n    },\n\n    {\n\n      \"sceneName\": \"Closing\nThoughts\",\n\n      \"backgroundImagePrompt\":\n\"An image of family members sharing sweets and laughter around a festive\ntable decorated for Diwali.\",\n\n      \"script\": [\n\n        {\n\n          \"Speech\": \"So that’s a\nglimpse into how we celebrate Diwali! It’s filled with love, laughter, and lots\nof sweets.\",\n\n          \"Speaker\":\n\"Rahul\",\n\n          \"Tone\":\n\"Festive\",\n\n          \"Look\":\n\"Listener\",\n\n          \"View\": \"Speaker\"\n\n        },\n\n        {\n\n          \"Speech\": \"We hope you\nall have a wonderful Diwali filled with joy and togetherness!\",\n\n          \"Speaker\":\n\"Anjali\",\n\n          \"Tone\":\n\"Festive\",\n\n          \"Look\":\n\"Listener\",\n\n          \"View\": \"Speaker\"\n\n        }\n\n      ]\n\n    }\n\n  ]\n\n}"},
      {text: `input: ${JSON.stringify(prompt)}`},
      {text: "output: "},
    ];
  
    const result = await model.generateContent({
      contents: [{ role: "user", parts }],
      generationConfig,
    });

    //console.log(result.response.text());
    return result.response.text();
  }

  export default generateScript;
